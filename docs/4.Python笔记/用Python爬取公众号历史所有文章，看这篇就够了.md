è‡ªå·±çš„å¾ˆå¤šæ–‡ç« éƒ½å‘åœ¨å…¬ä¼—å·ä¸Šï¼Œæƒ³è¦æŸ¥çœ‹æ‰€æœ‰å†å²æ–‡ç« ï¼Œå¯ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ã€‚

æœ‰æ²¡æœ‰åŠæ³•èƒ½ä¸€é”®æŠ“å–æ‰€æœ‰æ–‡ç« ï¼Œè‡ªåŠ¨å‘ˆç°åœ¨æˆ‘çœ¼å‰ï¼Ÿ

è¿™æ—¶ï¼Œçˆ¬è™«äº†è§£ä¸‹ï¼Ÿ

ä»Šæ—¥åˆ†äº«ï¼Œå°±å¸¦ç€å¤§å®¶å®æ“ä¸€ç•ªï¼Œçˆ¬å–å…¬ä¼—å·æ‰€æœ‰å†å²æ–‡ç« ã€‚


# ä»€ä¹ˆæ˜¯çˆ¬è™«

çˆ¬è™«è¿™ä¸ªåè¯ï¼Œç”±æ¥å·²ä¹…äº†ï¼Œå¯¹äºéæŠ€æœ¯åŒå­¦æ¥è¯´ï¼Œå¯èƒ½ç¨å¾®æœ‰ç‚¹é™Œç”Ÿã€‚

çˆ¬è™«ï¼Œæ˜¯ä¸€ç§è‡ªåŠ¨æµè§ˆç½‘é¡µçš„æŠ€æœ¯ï¼Œå®ƒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œè‡ªåŠ¨è®¿é—®äº’è”ç½‘ä¸Šçš„ç½‘é¡µï¼Œè·å–ç½‘é¡µå†…å®¹ã€‚çˆ¬è™«å¯ä»¥ç”¨äºå¤šç§ç›®çš„ï¼Œæ¯”å¦‚æœç´¢å¼•æ“çš„æ•°æ®æ”¶é›†ã€å¸‚åœºç ”ç©¶ã€æ•°æ®æŒ–æ˜ç­‰ã€‚

çˆ¬è™«çš„ç±»å‹å¯ä»¥åˆ†ä¸ºï¼š
- é€šç”¨çˆ¬è™«ï¼šçˆ¬å–æ•´ä¸ªäº’è”ç½‘ä¸Šçš„ä¿¡æ¯ï¼Œå¦‚ Google å’Œ ç™¾åº¦ çš„çˆ¬è™«ã€‚
- ç‰¹å®šçˆ¬è™«ï¼šä¸“æ³¨äºç‰¹å®šä¸»é¢˜æˆ–é¢†åŸŸçš„ä¿¡æ¯ï¼Œåªçˆ¬å–ä¸ç‰¹å®šä¸»é¢˜ç›¸å…³çš„ç½‘é¡µã€‚


**ï¼å‹æƒ…æé†’**ï¼šä½¿ç”¨çˆ¬è™«éœ€éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œå’Œç½‘ç«™çš„ robots.txt æ–‡ä»¶è§„å®šï¼Œé¿å…å¯¹ç½‘ç«™æœåŠ¡å™¨é€ æˆè¿‡å¤§è´Ÿæ‹…ã€‚


æ‰€ä»¥ï¼Œçˆ¬å–ç½‘ç»œèµ„æºï¼Œæœ€é‡è¦çš„å°±æ˜¯å¯ä»¥æ‰¾åˆ°ç›®æ ‡ç½‘ç«™çš„ url åœ°å€ã€‚

# å¦‚ä½•çˆ¬å–å…¬ä¼—å·æ–‡ç« 

## Step 1ï¼šæ³¨å†Œä¸€ä¸ªå…¬ä¼—å·

é¦–å…ˆï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªè‡ªå·±çš„å…¬ä¼—å·ï¼Œå·²ç»æœ‰å…¬ä¼—å·çš„å°ä¼™ä¼´å¯ä»¥ç•¥è¿‡ï¼Œæ¥ç€å¾€ä¸‹çœ‹ã€‚


å¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæ“ä½œï¼Œæ³¨å†Œå…¬ä¼—å·çš„æ­¥éª¤éå¸¸ç®€å•ã€‚

## Step 2ï¼šè·å–ä¸‰ä¸ªå€¼
ç™»å½•è‡ªå·±çš„å…¬ä¼—å·ï¼Œåœ¨æ§åˆ¶å°é¦–é¡µæ‰¾åˆ°æ–°çš„åˆ›ä½œï¼Œç‚¹å‡» `å›¾æ–‡ä¿¡æ¯`ï¼š

![](https://img-blog.csdnimg.cn/img_convert/62f198546902f926a48bacf1fe7e92d1.png)

ç„¶åï¼Œæ‰¾åˆ°æ­£ä¸Šé¢çš„`è¶…é“¾æ¥`å¹¶æ‰“å¼€ï¼š

![](https://img-blog.csdnimg.cn/img_convert/ca669ad7b3919aa08925123521e3538e.png)

è¿™æ—¶ä½ å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„æ‰€æœ‰æ–‡ç« åˆ—è¡¨äº†ï¼šï¼ˆå¦‚æœä½ æƒ³æŸ¥çœ‹å…¶ä»–å…¬ä¼—å·ï¼Œåœ¨å³ä¾§ğŸ‘‰ï¼‰

![](https://img-blog.csdnimg.cn/img_convert/27c8f068482654f453224048afde8d3f.png)

åœç•™åœ¨å½“å‰ç½‘é¡µï¼ŒæŒ‰ F12 æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œæ‰¾åˆ°`ç½‘ç»œ`ï¼Œç‚¹å‡»`Fetch/XHR`ï¼Œè¿‡æ»¤æ‰å…¶ä»–ä¿¡æ¯ã€‚
> æ³¨ï¼šæˆ‘è¿™é‡Œç”¨çš„ edge æµè§ˆå™¨ï¼Œå…¶ä»–æµè§ˆå™¨ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚

![](https://img-blog.csdnimg.cn/img_convert/935ee0b24d537393b09b083321856139.png)

æ‹‰åˆ°æ–‡ç« åˆ—è¡¨çš„æœ€ä¸‹æ–¹ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡»ç¿»é¡µæŒ‰é’®ã€‚æ­¤æ—¶ï¼Œä½ ä¼šå‘ç°å³ä¾§çš„å¼€å‘è€…å·¥å…·ç•Œé¢å†…å®¹å¤šå‡ºæ¥ä¸€æ¡ï¼Œå°±ç‚¹å®ƒğŸ‘‡ï¼š

![](https://img-blog.csdnimg.cn/img_convert/3e7a3533d0d8d07dbf458c3f34a57c57.png)

åœ¨ `æ ‡å¤´` è¿™é‡Œï¼Œæ‰¾åˆ° `cookie` å¹¶å¤åˆ¶å³ä¾§å¯¹åº”çš„å€¼ï¼š

![](https://img-blog.csdnimg.cn/img_convert/6164f22dc750f878a5dcc8ddd9a1c90a.png)

å†åˆ° `è´Ÿè½½` è¿™é‡Œï¼Œæ‰¾åˆ° `fakeid` å’Œ `token` å¹¶å¤åˆ¶ä¿å­˜ä¸‹æ¥ã€‚
![](https://img-blog.csdnimg.cn/img_convert/b563468d6c663c8f2f214ed393e6f82e.png)


æŠŠ cookiesã€token ä»¥åŠ fakeidï¼Œä¿å­˜ä¸‹æ¥ï¼Œè¿™ä¸‰è€…ç¼ºä¸€ä¸å¯ã€‚

## Step 3ï¼šç¼–å†™ä»£ç 
æœ‰äº†ä¸Šè¿°è¿™ä¸‰ä¸ªå€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ Python ä»£ç äº†ã€‚

é¦–å…ˆï¼Œå®šä¹‰ urlï¼Œheader ï¼Œç„¶åæŠŠä¸‰ä¸ªå€¼å¡«åˆ°ä¸‹é¢å‚æ•°çš„å¯¹åº”ä½ç½®ã€‚

```
# ç›®æ ‡url
url = "https://mp.weixin.qq.com/cgi-bin/appmsg"
cookie = "å¡«å†™ä¸Šæ–¹è·å–åˆ°çš„ cookie"

headers = {
    "Cookie": cookie,
    "User-Agent": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.75 Mobile Safari/537.36",
}

data = {
    "token": "å¡«å†™ä¸Šæ–¹è·å–åˆ°çš„ token",
    "lang": "zh_CN",
    "f": "json",
    "ajax": "1",
    "action": "list_ex",
    "begin": "0",
    "count": "5",
    "query": "",
    "fakeid": "å¡«å†™ä¸Šæ–¹è·å–åˆ°çš„ fakeid", # è‡ªå·±çš„å·ï¼Œè®¾ç½®ä¸ºç©º
    "type": "9",
}
```


**æƒ³è¦çœ‹çœ‹å…¬ä¼—å·å…±æœ‰å¤šå°‘ç¯‡å†…å®¹ï¼Ÿ** æ¥~

```
def get_total_count():
    content_json = requests.get(url, headers=headers, params=data).json()
    count = int(content_json["app_msg_cnt"])
    return count
```

**æƒ³è¦è·å–æ‰€æœ‰æ–‡ç« å†…å®¹ï¼Ÿ** æ¥~

```
def get_content_list(count, per_page=5):
    page = int(math.ceil(count / per_page))
    content_list = []
    for i in tqdm(range(page), desc="è·å–æ–‡ç« åˆ—è¡¨"):
        data["begin"] = i * per_page
        content_json = requests.get(url, headers=headers, params=data).json()
        content_list.extend(content_json["app_msg_list"])
        time.sleep(random.randint(5, 10))
        # ä¿å­˜æˆjson
        with open("content_list.json", "w", encoding="utf-8") as f:
            json.dump(content_list, f, ensure_ascii=False, indent=4)
```
æˆ‘ä»¬åœ¨`"app_msg_list"`ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ‹¿åˆ°äº†æ‰€æœ‰æ–‡ç« çš„åˆ—è¡¨ï¼š

![](https://img-blog.csdnimg.cn/img_convert/39451fdc7fb5609a162b8bc66c614246.png)

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠæ–‡ç« å¤„ç†æˆè¡¨æ ¼ï¼Œæ–¹ä¾¿æŸ¥çœ‹ï¼š

```
import pandas as pd
def precess_content_list():
    content_list = json.load(open("content_list.json", "r", encoding="utf-8"))
    results_list = []
    for item in content_list:
        title = item["title"]
        link = item["link"]
        create_time = time.strftime("%Y-%m-%d %H:%M", time.localtime(item["create_time"]))
        results_list.append([title, link, create_time])
    name = ['title', 'link', 'create_time']
    data = pd.DataFrame(columns=name, data=results_list)
    data.to_csv("data.csv", mode='w', encoding='utf-8')
```

ç”¨ Excel æ‰“å¼€çœ‹çœ‹å§ï¼š 

![](https://img-blog.csdnimg.cn/img_convert/2153088b3cc124a2c33904d46a407235.png)

# å†™åœ¨æœ€å

æœ¬æ–‡é€šè¿‡ä¸€ä¸ªç®€å•çš„å®æ“ï¼Œå¸¦å¤§å®¶èµ°è¿›çˆ¬è™«çš„ä¸–ç•Œï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä½¿ç”¨ Pythonï¼Œä¸€é”®æŠ“å–å¾®ä¿¡å…¬ä¼—å·ä¸Šçš„æ‰€æœ‰å†å²æ–‡ç« ã€‚

è¿˜æƒ³çˆ¬å–æ–‡ç« å†…å®¹ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°ï¼Ÿ

å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œåç»­æˆ‘ä¼šæ›´æ–°æ›´å¤šç”¨çˆ¬è™«è§£å†³æ—¥å¸¸éœ€æ±‚çš„æ•™ç¨‹ã€‚

å¦‚æœæœ¬æ–‡æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ª**å…è´¹çš„èµ**å’Œ**æ”¶è—**å¤‡ç”¨ã€‚ä½ çš„æ”¯æŒæ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ã€‚